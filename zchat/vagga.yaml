containers:
  django:
    setup:
    - !Ubuntu trusty
    - !Install
      - libpq-dev  # needed to build psycopg2 python package
    - !PipConfig
      dependencies: true
    - !Py2Requirements requirements_dev.txt
    - !Py2Install
      - pip
    environ-file: /work/.env.aws
    environ:
      VIRTUAL_ENV: ZAPPA_HACK
    volumes:
      /tmp: !Tmpfs
        size: 500M
        mode: 0o700

commands:
  run: !Command
    description: Start the django development server
    container: django
    run: python2 manage.py runserver
  manage.py: !Command
    description: Shortcut to manage.py
    container: django
    run:
    - python2
    - manage.py
  zappa: !Command
    description: Shortcut zappa
    container: django
    run:
    - zappa
